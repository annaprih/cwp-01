const directory = 'flag' 
const fs = require('fs');
const path = require('path');
function read(dir){
     fs.readdir(dir, function(error, files){
         files.forEach(function(file){ 
        fs.stat(dir + '/' +  file, function(error, state){
           if(state.isDirectory()){
             direct = dir + '/' + file;
             read(direct);
            } else {
              console.log(path.relative(directory, dir +'/'+ file));
            } 
         });
         });
     });}

read(directory); 
function create(dir){
        const newDir = dir + '\\' + path.basename(dir);
        fs.mkdir(newDir, function (error) {
        if (error) {
            console.error('Ошибка создания файла');
        }
    });
return newDir;
};
const txtDir = create(directory);

